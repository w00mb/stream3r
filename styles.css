/* ==========================================================================
   1. Tokens & Base
   ========================================================================== */

:root {
  /* Colors */
  --bg: #f6f7fb;
  --content-bg: #000000;
  --card: #ffffff;
  --text: #1f2328;
  --muted: #6b7280;
  --border: #e5e7eb;
  --accent: #7c3aed;
  --accent-contrast: #ffffff;

  /* Elevation */
  --shadow: 0 6px 24px rgba(0, 0, 0, 0.08);

  /* Spacing */
  --space-1: 0.25rem; /* 4px */
  --space-2: 0.5rem;  /* 8px */
  --space-3: 1rem;    /* 16px */
  --space-4: 1.5rem;  /* 24px */
  --space-5: 2.5rem;  /* 40px */

  /* Layout */
  --section-inset: clamp(0.75rem, 3vw, 1.25rem);
  --container-max-width: 1100px;
  --container-padding: 2rem 2.75rem;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b0f14;
    --card: #10161d;
    --text: #e6edf3;
    --muted: #9aa4b2;
    --border: #22303c;
    --accent: #a78bfa;
    --accent-contrast: #0b0f14;
    --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  }
}

/* Base */
*, *::before, *::after { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font: 16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color: var(--text);
  background: var(--bg);
}

/* ==========================================================================
   2. Layout
   ========================================================================== */

.Site {
  display: flex;
  flex-direction: column;
  min-height: 100%;
}

.Site-header, .Site-footer {
  flex-shrink: 0;
  background: var(--card);
  border-bottom: 1px solid var(--border);
}

.Site-header { box-shadow: var(--shadow); }
.Site-footer { border-top: 1px solid var(--border); border-bottom: none; }

.Site-main {
  flex-grow: 1;
  background: var(--content-bg);
  padding: var(--space-4) 0 var(--space-5);
}

.container-xl {
  max-width: var(--container-max-width);
  margin: 0 auto;
  padding: var(--container-padding);
}

/* ==========================================================================
   3. Components
   ========================================================================== */

/* Button */
.Button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.55rem 0.9rem;
  border-radius: 999px;
  font-weight: 600;
  text-decoration: none;
  border: 1px solid var(--border);
  color: var(--text);
  background: transparent;
  transition: background-color 120ms ease, transform 80ms ease, border-color 120ms ease;
}
.Button:hover { background: rgba(124, 58, 237, 0.08); border-color: var(--accent); }
.Button:active { transform: translateY(1px); }

.Button--primary { background: var(--accent); color: var(--accent-contrast); border-color: var(--accent); }
.Button--invisible { border-color: transparent; background: transparent; }
.Button.size-small { padding: 0.35rem 0.6rem; font-size: 0.9rem; }

/* Card */
.Card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow);
}

/* FormControl */
.FormControl {
  width: 100%;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 0.55rem 0.65rem;
  font: inherit;
  color: var(--text);
  background: transparent;
}
textarea.FormControl { resize: vertical; }

/* ==========================================================================
   4. App-specific Styles
   ========================================================================== */

.brand, .brand:visited {
  color: var(--text);
  text-decoration: none;
}

/* Profile */
.profile-card {
  overflow: hidden; /* For border-radius on image */
}
.profile-media {
  flex: 0 0 340px;
  min-height: 340px;
  background: #d1d5db;
}
.profile-media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.profile-body {
  padding: var(--space-4);
}

/* Events */
.event-list { list-style: none; padding: 0; }
.event {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-2) 0;
}
.event + .event { border-top: 1px solid var(--border); }

.event-date {
  display: grid;
  place-items: center;
  width: 52px; height: 52px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(124,58,237,0.06);
  flex-shrink: 0;
}
.event-day { font-size: 1.1rem; font-weight: 800; }
.event-month { font-size: 0.75rem; color: var(--muted); }
.event-info { display: flex; flex-direction: column; min-width: 0; }
.event-title { font-weight: 700; }
.event-meta { color: var(--muted); font-size: 0.9rem; }

/* Feed */
.post {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-3);
}
.post + .post { border-top: 1px solid var(--border); }
.avatar {
  flex-shrink: 0;
  width: 64px;
  height: 64px;
  border-radius: 50%;
  overflow: hidden;
}
.avatar img { width: 100%; height: 100%; object-fit: cover; }
.post-body { flex-grow: 1; }
.post-header { display: flex; justify-content: space-between; align-items: baseline; gap: var(--space-2); }
.identity { display: flex; align-items: baseline; gap: var(--space-2); }
.name { font-weight: 700; }
.handle, .timestamp { color: var(--muted); font-size: 0.95rem; }
.timestamp { white-space: nowrap; }
.post-content { margin-top: var(--space-1); }

/* Admin */
.tab-nav {
  border-bottom: 1px solid var(--border);
}

.form-grid { display: grid; gap: var(--space-3); }
.card-section {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: var(--space-3);
}
.card-section > legend { padding: 0 var(--space-1); font-weight: 800; }

.metrics-grid {
  display: grid;
  gap: var(--space-3);
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}
.metric-card {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: var(--space-3);
}
.metric-card h3 { margin: 0 0 var(--space-1); font-size: 1rem; }
.metric-value { font-size: 1.4rem; font-weight: 800; }

/* ==========================================================================
   5. Utility Classes
   ========================================================================== */

.d-flex { display: flex !important; }
.flex-column { flex-direction: column !important; }
.flex-justify-between { justify-content: space-between !important; }
.flex-items-center { align-items: center !important; }
.flex-justify-end { justify-content: flex-end !important; } /* Added */
.flex-wrap { flex-wrap: wrap !important; }

.gap-1 { gap: var(--space-1) !important; }
.gap-2 { gap: var(--space-2) !important; }
.gap-3 { gap: var(--space-3) !important; }

.p-1 { padding: var(--space-1) !important; }
.p-2 { padding: var(--space-2) !important; }
.p-3 { padding: var(--space-3) !important; }

.m-0 { margin: 0 !important; }
.mb-3 { margin-bottom: var(--space-3) !important; }

.f2 { font-size: 1.85rem !important; }
.f3 { font-size: 1.5rem !important; }
.f4 { font-size: 1.25rem !important; }

.text-semibold { font-weight: 600 !important; }
.text-bold { font-weight: 700 !important; }

.color-fg-muted { color: var(--muted) !important; }
.color-fg-danger { color: #d73a49 !important; }

.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* ==========================================================================
   6. Responsive
   ========================================================================== */

@media (max-width: 980px) {
  .container-xl { padding: 2rem 2.25rem; }
}

@media (max-width: 860px) {
  .profile-media { flex-basis: 300px; min-height: 300px; }
}

@media (max-width: 720px) {
  .profile-card.d-flex { flex-direction: column; }
  .profile-media { flex-basis: auto; min-height: 280px; }
  .post-header { flex-wrap: wrap; row-gap: var(--space-1); }
}

@media (max-width: 560px) {
  .container-xl { padding: 1.5rem 1.25rem; }
}
